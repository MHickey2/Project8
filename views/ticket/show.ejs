<!DOCTYPE html>
<html lang="fr">
<%- include('../shared/head', {css: ['details', 'navbar']}) %>

<body>
    <%- include('../shared/navbar', {}) %>
    <div class="details">
        <h1>Ticket Details</h1>
        <h2>ID : <%= ticket.id %></h2>
        <h2>Title : <%= ticket.title %></h2>
        <h2>Description : <%= ticket.description %></h2>
        <h2>Assigned to : <%= ticket.assignedTo %></h2>
        <h2>Priority : <%= ticket.priority %></h2>
        <h2>Status : <% if(ticket.completed) { %> <i class="fa fa-check complete" aria-hidden="true"></i> <% } else { %> <i class="fa fa-clock-o in-progress" aria-hidden="true"></i> <% } %></h2>
        <h2>Created by: <%= ticket.createdBy %></h2>
    </div>


    <div id="addComment">
        <form method="POST" id="formId">
            <textarea id="comment" name="comment" placeholder="Add comment" style="width: 600px;"
                required></textarea><br />
            <button type="submit" class="btn btn-primary">Post</button>
        </form>
    </div>

    <% if (typeof ticket.comments !== 'undefined') { %> 
    <div>
        <table id="comments">
            <% ticket.comments = ticket.comments.reverse();%>
            <%ticket.comments.forEach(function (com){ %>
            <tr>
                <td>
                    <p><%= com.comment %></p>
                    <p><em>- <%= com.userName %></em></p>
                </td>
            </tr>
            <% })%>
        </table>
    </div>
    <% } %>
</body>

</html>